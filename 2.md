Yes, you can absolutely use the .deb file for tshark — in fact, it's a common and efficient approach. You’ll just need to extract the contents of the .deb file and include the necessary parts (binaries + shared libraries) in your AppImage under app/usr/.

Here’s how to do it:


---

✅ Step-by-Step: Extract tshark from a .deb Package

Let’s assume you downloaded tshark_4.2.0_amd64.deb.


---

🔧 1. Extract the .deb Package

mkdir -p build/tshark
dpkg-deb -xv tshark_4.2.0_amd64.deb build/tshark

This will extract the file structure to build/tshark, typically like:

build/tshark/
├── usr/
│   ├── bin/
│   │   └── tshark
│   └── lib/
│       └── x86_64-linux-gnu/...


---

📁 2. Copy to AppDir

Now, move the extracted files into your AppImage’s directory structure:

# Assuming app/ is your AppDir
cp -a build/tshark/usr/bin/tshark app/usr/bin/
cp -a build/tshark/usr/lib/* app/usr/lib/

If tshark has dependencies in /lib/x86_64-linux-gnu/ or similar, also copy them into app/usr/lib/.


---

✅ 3. Fix Runtime Paths

Update AppRun to ensure these libraries and the binary are found:

#!/bin/bash
HERE="$(dirname "$(readlink -f "$0")")"

export PATH="$HERE/usr/bin:$PATH"
export LD_LIBRARY_PATH="$HERE/usr/lib:$LD_LIBRARY_PATH"
export PYTHONHOME="$HERE/usr/venv"
export PYTHONPATH="$HERE/usr/venv/lib/python3.*/site-packages"

exec "$HERE/usr/venv/bin/python" "$HERE/main.py" "$@"

Make sure AppRun is executable:

chmod +x app/AppRun


---

🧪 Optional: Check tshark dependencies

If you want to be thorough, run:

ldd build/tshark/usr/bin/tshark

This shows all shared libraries tshark needs — copy any missing ones from your system or install them inside app/usr/lib.


---

🎯 Summary

✅ Yes, using a .deb file for tshark is a valid and easy method.

You simply:

Extract .deb

Copy tshark and needed .so files into app/usr/

Update your AppRun script to use them.



---

Would you like me to generate a complete build-appimage.sh script that automates all of this, including extracting from .deb?








Great! Here's a complete build-appimage.sh script that:

✅ Extracts tshark from a .deb file
✅ Sets up a Python venv with pyshark
✅ Assembles an AppDir layout
✅ Creates an AppImage using appimagetool


---

📄 build-appimage.sh

Save this in your project root (next to main.py and tshark_*.deb):

#!/bin/bash

set -e

APPNAME="PySharkAnalyzer"
DEB_FILE="tshark_4.2.0_amd64.deb"  # <-- replace if your .deb filename differs

# Paths
APPDIR="app"
BUILD_DIR="build"
VENVDIR="$APPDIR/usr/venv"

echo "[*] Cleaning previous build..."
rm -rf "$APPDIR" "$BUILD_DIR"
mkdir -p "$APPDIR/usr/bin" "$APPDIR/usr/lib" "$APPDIR/usr/share/applications" "$BUILD_DIR"

echo "[*] Extracting $DEB_FILE..."
dpkg-deb -xv "$DEB_FILE" "$BUILD_DIR/tshark"

echo "[*] Copying tshark binary and libraries..."
cp -a "$BUILD_DIR/tshark/usr/bin/tshark" "$APPDIR/usr/bin/"
cp -a "$BUILD_DIR/tshark/usr/lib/"* "$APPDIR/usr/lib/" || true

echo "[*] Setting up Python venv..."
python3 -m venv "$VENVDIR"
"$VENVDIR/bin/pip" install --upgrade pip
"$VENVDIR/bin/pip" install pyshark

echo "[*] Copying your Python script..."
cp main.py "$APPDIR/main.py"

echo "[*] Creating AppRun launcher..."
cat > "$APPDIR/AppRun" <<'EOF'
#!/bin/bash
HERE="$(dirname "$(readlink -f "$0")")"
export PATH="$HERE/usr/bin:$PATH"
export LD_LIBRARY_PATH="$HERE/usr/lib:$LD_LIBRARY_PATH"
export PYTHONHOME="$HERE/usr/venv"
export PYTHONPATH="$HERE/usr/venv/lib/python3.*/site-packages"
exec "$HERE/usr/venv/bin/python" "$HERE/main.py" "$@"
EOF

chmod +x "$APPDIR/AppRun"

echo "[*] Creating desktop entry..."
cat > "$APPDIR/$APPNAME.desktop" <<EOF
[Desktop Entry]
Name=$APPNAME
Exec=AppRun
Icon=utilities-terminal
Type=Application
Categories=Utility;
EOF

echo "[*] Downloading appimagetool if not present..."
if [ ! -f appimagetool-x86_64.AppImage ]; then
    wget https://github.com/AppImage/AppImageKit/releases/latest/download/appimagetool-x86_64.AppImage
    chmod +x appimagetool-x86_64.AppImage
fi

echo "[*] Building AppImage..."
./appimagetool-x86_64.AppImage "$APPDIR" "${APPNAME}.AppImage"

echo "[✔] Done! Output: ${APPNAME}.AppImage"


---

📁 Project Layout Recap

Make sure your project structure looks like this before running the script:

pyshark-app/
├── build-appimage.sh       <-- The script above
├── main.py                 <-- Your Python script using pyshark
├── tshark_4.2.0_amd64.deb  <-- The tshark deb file
└── requirements.txt        <-- Optional if you want to customize deps


---

▶ How to Run

chmod +x build-appimage.sh
./build-appimage.sh

It will produce:

PySharkAnalyzer.AppImage

Ready to distribute and run!


---

✅ Notes

You can customize the main.py path, desktop icon, or additional Python dependencies as needed.

If you want to support other distros, build on a low-base system like Ubuntu 20.04 or use Docker for reproducibility.



---

Would you like a version that uses docker to build this AppImage in a clean environment (for better portability)?


